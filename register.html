<!DOCTYPE html>

<head>
  <title>Register</title>
  <link rel="shortcut icon" type="image/png" href="assets/logo.png" />
  <link rel="stylesheet" href="style.css" />
  <script type="text/javascript" src="scripts/utils.js"></script>
  <script type="text/javascript" src="scripts/components.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body onload="return initSession()">
  <header>
    <div class="logoContainer">
      <a href="index.html">
        <img class="logo" src="assets/logo.png">
        <img class="logoText" src="assets/logo-text.png">
      </a>
    </div>
  </header>
  <hr>
  <div class="formContainer">
    <div class="formContainerInside">
      <div class="formImage">
        <img src="assets/clipboard.png" />
      </div>
      <div class="formBox">

        <form method="POST" action="todo.html" onsubmit="return inputRegister()">
          <h2 style="color:#0B5F58;">Register</h2>
          <input type="text" id="registerUsername" placeholder="Enter Username" required />
          <input type="email" id="registerMail" placeholder="Enter E-mail" required />
          <input type="password" id="registerPassword" placeholder="Enter Password" onkeyup="passwordValidation()" required />
          <input type="password" id="checkPassword" placeholder="Enter Password Again" onkeyup="passwordValidation()" required />
          <span id='message'></span>

          <input type="date" id="registerBirthday" placeholder="Enter Birthday" required />

          <input style="width:10px;" type="radio" id="genderMale" name="registerGender" value="Male" required>
          <label class="genderText" for="genderMale">Male</label><br>

          <input style="width:10px;" type="radio" id="genderFemale" name="registerGender" value="Female">
          <label class="genderText" for="genderFemale">Female</label><br>

          <input type="submit" id="registerButton" value="Register" />
        </form>
      </div>
    </div>
  </div>

  <script>
    function inputRegister() {
      var username = document.getElementById("registerUsername").value
      var password = document.getElementById("registerPassword").value
      var checkpassword = document.getElementById("checkPassword").value
      var email = document.getElementById("registerMail").value
      var birthday = document.getElementById("registerBirthday").value
      var gender = document.getElementsByName('registerGender')
      for (i = 0; i < gender.length; i++) {
        if (gender[i].checked)
          gender = gender[i].value
      }
      var registerBool = register(username, password, email, birthday, gender)
      if (password == checkpassword) {
        if (registerBool) {
          login(username, password)
          return true
        }
        else
          alert("That user already exists.")
        return false
      }
      else {
        alert("Passwords don't match")
        return false
      }
    }


    function passwordValidation() {
      if (document.getElementById('registerPassword').value != document.getElementById('checkPassword').value) {
        document.getElementById('message').style.color = 'red';
        document.getElementById('message').innerHTML = 'Your passwords do not match';
      }
      else
        document.getElementById('message').innerHTML = "";
    }
  </script>

  <div class="footer">
    <div class="footerLeft">
      <h2>TODO</h2>
      <p>This to-do list project was prepared for the Web Application Development course in 2020.</p>
    </div>
    <div class="footerRight">
      Prepared by OZU students.
    </div>
  </div>

</body>

</html>